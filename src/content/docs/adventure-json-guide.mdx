# Generating New Adventure Content

This section outlines the recommended process for creating new adventure episodes:

1.  **Review Documentation:** Familiarize yourself with the overall story arc, characters, and themes by reviewing any available story documentation.
2.  **Analyze Existing Episodes:** Review the JSON files of existing adventures (like the samples in `src/data/adventures/`) to understand the tone, style, and complexity. Ask the user to share specific episodes if needed.
3.  **Propose Ideas:** Based on the documentation and existing content, suggest 3 distinct ideas for the next adventure episode. Briefly outline the plot and key choices for each.
4.  **User Selection:** Wait for the user to choose one of the proposed ideas.
5.  **Generate Content:** Create the full JSON structure for the selected adventure idea, following the format described below. Pay close attention to scene flow, character dialogue, and branching logic. Submit the generated JSON for user feedback.
6.  **Iterate:** Incorporate user feedback and refine the JSON until it meets the requirements.

---

# Adventure JSON Structure Guide

This guide explains the structure of the JSON files used to define adventures in the Exodus game. Understanding this structure is crucial for creating new adventure episodes.

## Sample Adventure JSON (`days_of_honor.json`)

Here is an example of a complete adventure JSON file:

```json
{
  "title": "ימי הכבוד",
  "description": "שנות שפע במצרים, בני ישראל זוכים ליחס של כבוד.",
  "scenes": [
    {
        "id": "start_honor",
        "speaker": "מספר",
        "text": "שנות שפע במצרים. השמש מאירה על ערים משגשגות ועל שדות פוריים לאורך הנילוס. אתם, בני ישראל, זוכים ליחס של כבוד והערכה מצד המצרים.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": null,
        "background_img": "/images/ancient_egypt_prosperity_bg.webp"
    },
    {
        "speaker": "יסכהר",
        "text": "אשר, עבודתך בפרויקט התעלות מרשימה כתמיד. פרעה עצמו שמע על חריצותך.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp"
    },
    {
        "speaker": "אשר",
        "text": "תודה לך, יסכהר האדון. אנו משתדלים לתרום כמיטב יכולתנו לשגשוגה של מצרים, הארץ שקיבלה אותנו בזרועות פתוחות.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp"
    },
    {
        "speaker": "יסכהר",
        "text": "אכן, ואנו מעריכים זאת. למעשה, השר הממונה מבקש את עצתך בנוגע לתכנון הגשר החדש. חוכמתכם ידועה.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp"
    },
    {
        "speaker": "מספר",
        "text": "ההצעה מחממת את ליבך. זוהי הזדמנות נוספת להוכיח את נאמנותכם וכישרונכם.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp",
        "choices": [
            { "text": "הסכם בהתלהבות: \"בכבוד רב! אשמח לסייע בכל דרך.\"", "outcome": "accept_eagerly" },
            { "text": "הסכם בצניעות: \"אעשה כמיטב יכולתי, אדוני.\"", "outcome": "accept_modestly" },
            { "text": "הסס קלות: \"האם אתה בטוח שאני האדם המתאים?\"", "outcome": "hesitate" }
        ]
    },
    {
        "id": "accept_eagerly",
        "speaker": "יסכהר",
        "text": "(מחייך בסיפוק) מצוין, אשר! ידעתי שאפשר לסמוך עליך. בוא עמי למשרדי השר.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp",
        "next": "end_scene_honor"
    },
    {
        "id": "accept_modestly",
        "speaker": "יסכהר",
        "text": "(מהנהן בהערכה) ענוותנותך מוסיפה לכבודך, אשר. אני בטוח שתרומתך תהיה חשובה. נפגש מחר לדון בפרטים.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp",
        "next": "end_scene_honor"
    },
    {
        "id": "hesitate",
        "speaker": "יסכהר",
        "text": "(מביט בך לרגע) אל תפקפק בערכך, אשר. ניסיונך מוערך. אנו סומכים על שיקול דעתך. הכן את רעיונותיך לפגישה מחר.",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": "/images/oziris_avatar_nobg.png",
        "background_img": "/images/ancient_egypt_prosperity_bg.webp",
        "next": "end_scene_honor"
    },
    {
        "id": "end_scene_honor",
        "speaker": "מספר",
        "text": "קרני השמש מוסיפות לזרוח על מצרים. היחסים עם המצרים טובים, ואתם חלק משגשוג הממלכה. אך האם מצב זה יימשך לנצח?",
        "character_left_img": "/images/ohad_avatar_nobg.png",
        "character_right_img": null,
        "background_img": "/images/ancient_egypt_prosperity_bg.webp",
        "end": true
    }
  ]
}
```

## Field Descriptions

### Top-Level Fields

*   **`title`** (String): The main title of the adventure episode (e.g., "ימי הכבוד").
*   **`description`** (String): A brief description or summary of the adventure's theme or starting point (e.g., "שנות שפע במצרים, בני ישראל זוכים ליחס של כבוד.").
*   **`scenes`** (Array of Scene Objects): This is the core of the adventure, containing an ordered list of scenes that make up the narrative flow.

### Scene Object Fields

Each object within the `scenes` array represents a single step or moment in the adventure.

*   **`id`** (String, Optional but recommended for branching): A unique identifier for the scene. This is crucial for navigation using `choices` and `next`. The first scene usually doesn't need an `id` unless it's branched *to*. A common convention is to use descriptive names (e.g., `start_honor`, `accept_eagerly`).
*   **`speaker`** (String): The name of the character speaking or "מספר" (Narrator) for narrative text.
*   **`text`** (String): The dialogue or narrative text to be displayed for this scene.
*   **`character_left_img`** (String or `null`): The path to the image file for the character displayed on the left side of the screen. Use a relative path starting from `/public/`. If `null`, no character is shown on the left. (e.g., `/images/ohad_avatar_nobg.png`).
*   **`character_right_img`** (String or `null`): The path to the image file for the character displayed on the right side of the screen. Use a relative path starting from `/public/`. If `null`, no character is shown on the right. (e.g., `/images/oziris_avatar_nobg.png`).
*   **`background_img`** (String): The path to the background image for the scene. Use a relative path starting from `/public/`. (e.g., `/images/ancient_egypt_prosperity_bg.webp`).
*   **`choices`** (Array of Choice Objects, Optional): If present, this field provides the player with options to choose from. The adventure pauses here until the player makes a selection. If omitted, the adventure proceeds automatically to the next scene in the array or the scene specified by `next`.
*   **`next`** (String, Optional): The `id` of the scene to jump to *after* this scene is displayed. This is used for linear progression *after* a non-choice scene or for directing the flow after a choice has led to a specific outcome scene. If both `choices` and `next` are absent, the game proceeds to the next scene sequentially in the `scenes` array.
*   **`end`** (Boolean, Optional): If set to `true`, this marks the end of the adventure episode after this scene is displayed.

### Choice Object Fields

Each object within the `choices` array represents a single option presented to the player.

*   **`text`** (String): The text displayed on the choice button for the player (e.g., "הסכם בהתלהבות: \"בכבוד רב! אשמח לסייע בכל דרך.\"").
*   **`outcome`** (String): The `id` of the scene to navigate to when this choice is selected. This `id` must match the `id` field of another scene object within the `scenes` array.

## Narrative Flow

1.  **Start:** The adventure begins with the first scene object in the `scenes` array.
2.  **Progression:**
    *   If a scene has no `choices` and no `next`, the adventure proceeds to the *next scene object* in the array.
    *   If a scene has a `next` field, the adventure jumps to the scene whose `id` matches the `next` value.
    *   If a scene has a `choices` array, the adventure pauses, displays the choices, and waits for player input.
3.  **Choices:** When the player selects a choice, the adventure jumps to the scene whose `id` matches the `outcome` value of the chosen option.
4.  **End:** The adventure concludes when a scene with `"end": true` is reached.

Remember to ensure all `outcome` and `next` values correspond to valid scene `id`s within the same JSON file to avoid errors.
