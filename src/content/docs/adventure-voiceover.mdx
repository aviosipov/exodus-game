---
title: מדריך ליצירת קריינות להרפתקאות
description: הסבר כיצד להפעיל ולהשתמש בכלי ליצירת קבצי שמע לטקסטים בהרפתקאות במשחק "יציאת מצרים"
lang: he
---

# יצירת קריינות להרפתקאות

מסמך זה מסביר כיצד ליצור קבצי שמע (voice-over) עבור נרטיבים של הרפתקאות וכיצד המערכת משתמשת בהם.

## סקירה כללית

הפרויקט כולל כלי ליצירה אוטומטית של קריינות שמע באמצעות ממשק ה-API של OpenAI Text-to-Speech (TTS) עבור תוכן הטקסט בקבצי ה-JSON של ההרפתקאות. זה משפר את חווית השחקן על ידי מתן קריינות מדוברת לצד הטקסט הכתוב.

## יצירת קריינות

### 1. הכנת קובץ ה-JSON של ההרפתקה

לפני יצירת השמע, עליך לסמן שהרפתקה צריכה לכלול קריינות.

-   פתח את קובץ ה-JSON של ההרפתקה (לדוגמה, `src/data/adventures/your_adventure_name.json`).
-   הוסף את השדה הבא ברמה העליונה של אובייקט ה-JSON:
    ```json
    "voiceOver": true,
    ```

דוגמה (`src/data/adventures/days_of_honor.json`):

```json {3}
{
  "title": "ימי הכבוד",
  "description": "שנות שפע במצרים, בני ישראל זוכים ליחס של כבוד.",
  "voiceOver": true,
  "scenes": [
    // ... שאר הסצנות
  ]
}
```

### 2. הגדרת מפתח API

סקריפט היצירה דורש גישה ל-API של OpenAI. ודא שמפתח ה-API שלך זמין כמשתנה סביבה:

-   הוסף `OPENAI_API_KEY=your_actual_api_key` לקובץ `.env.local` שלך בשורש הפרויקט.

### 3. הרצת סקריפט היצירה

השתמש בפקודת הסקריפט הבאה של npm בטרמינל שלך:

```bash
npm run voiceover <episode_name>
```

החלף את `<episode_name>` בשם הקובץ של ה-JSON של ההרפתקה (ללא הסיומת `.json`).

דוגמה:

```bash
npm run voiceover days_of_honor
```

הסקריפט יבצע את הפעולות הבאות:
- יקרא את קובץ ה-JSON של ההרפתקה שצוינה.
- יעבור על כל סצנה ובחירה.
- יקרא ל-API של OpenAI TTS (מודל `gpt-4o-mini-tts` כברירת מחדל) כדי ליצור קובץ שמע MP3 עבור כל קטע טקסט (`scene.text` ו-`choice.text`).
- ישמור את קבצי ה-MP3 שנוצרו בתיקייה `public/audio/adventures/<episode_name>/`.
- שמות הקבצים יהיו בתבנית: `<episode_name>.<scene_id_or_index>.[choice_index].mp3`.

## השמעה אוטומטית

לאחר שקבצי השמע נוצרו והדגל `voiceOver: true` הוגדר ב-JSON:

-   דף השמעת ההרפתקה (`/adventure/[id]`) יזהה אוטומטית את קיומם של קבצי שמע.
-   כאשר סצנה מוצגת, קובץ השמע המתאים יתנגן אוטומטית.
-   ההשמעה משתמשת באלמנט `<audio>` HTML מוסתר המנוהל על ידי React hooks.

## חיווי ברשימת ההרפתקאות

הרפתקאות שהוגדר להן הדגל `"voiceOver": true` בקובץ ה-JSON שלהן יציגו סמל של רמקול (<Volume2 />) ליד הכותרת שלהן במסך בחירת ההרפתקאות הראשי (`/adventure`). זה מספק חיווי ויזואלי לשחקנים המציין אילו הרפתקאות כוללות קריינות קולית.

## התאמה אישית (אופציונלי)

ניתן לשנות את הקול, מודל ה-TTS או הוראות הקריינות על ידי עריכת הקבועים בראש הסקריפט `scripts/generate-voiceover.mjs`.
