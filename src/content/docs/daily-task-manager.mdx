---
title: תיעוד משחק - מנהל משימות יומי
description: תיעוד טכני למשחק הסימולציה לניהול משאבים "מנהל משימות יומי
lang: he
---

# תיעוד משחק - מנהל משימות יומי

## סקירה כללית
משחק סימולציה לניהול משאבים שבו שחקנים מקצים משימות לעובדים תוך איזון בין צרכים אישיים ומשאבים משותפים. נבנה באמצעות React/TypeScript תוך שימוש ב-hooks מותאמים אישית להפרדה ברורה של תחומי אחריות (separation of concerns).

## מבנה קבצים מרכזי
```markdown
src/components/mini-games/daily-task-manager/
├── types.ts          # מבני נתונים וממשקים מרכזיים
├── taskSets.ts       # הגדרות תרחישים ותצורות קבועות מראש
├── hooks/            # מימושי hooks מותאמים אישית
│   ├── useGameLogic.ts       # בקר זרימת המשחק הראשי
│   ├── useWorkerManagement.ts # ניהול מצב עובדים וביצוע משימות
│   └── useGameTimer.ts       # מערכת טיימר גלובלית
├── utils.tsx         # פונקציות עזר וכלי עזר לממשק משתמש
└── WorkerTaskManagerGame.tsx # קומפוננטה ראשית והרכבת ממשק המשתמש
```

## מערכת תרחישים (`taskSets.ts`)
### מבנה תרחיש
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}

### תרחישים לדוגמה
1. **ייצור לבנים**
   - עובדים מתחילים עם כמות מוגבלת של קש/חימר
   - מטרה: לייצר 25 לבנים
   - משימות: איסוף חומרים, אכילה, מנוחה

2. **בניית פירמידה**
   - התמקדות בגרירת/הנחת אבנים
   - שרשרת משאבים מורכבת (מים ← אנרגיה ← אבנים)
   - אתגר ניהול צוות עם 4 עובדים

### הגדרת משימה
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}

## ארכיטקטורת Hooks מותאמים אישית
### `useGameLogic` (בקר מרכזי)
- מנהל מעברי מצב משחק (התחלה/סיום)
- מתאם עדכוני עובדים/משאבים
- מטפל באימות/ביצוע זרימת משימות
- חושף מצב משחק מרכזי לקומפוננטות ממשק המשתמש

### `useWorkerManagement` (מערכת עובדים)
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
- **תכונות מרכזיות**:
  1. ניהול מצב עובדים
  2. דלדול צרכים אוטומטי (רעב/מורל)
  3. טיפול בטיימר משימות
  4. עדכוני מצב בכמות גדולה (bulk)
  5. השפעות השלמת משימה
- **מתודות ליבה**: `startWorkerTaskTimer()`, `completeWorkerTask()`, `updateWorkerState()`

### `useGameTimer` (ניהול זמן)
- עוקב אחר ספירה לאחור גלובלית
- מטפל בהתחלה/עצירה/איפוס של הטיימר
- מפעיל סיום משחק בזמן קצוב
- מסתנכרן עם קצב רענון ממשק המשתמש

## תבניות ניהול מצב (State Management Patterns)
### מצב מבוסס Hooks מודולרי
*(דמיינו: מיכלי מצב ספציפיים ל-Hook עם אינטראקציות מבוקרות)*

### מיכלי מצב מרכזיים
1. **מצב עובד (Worker State)**
   - מנוהל ב-`useWorkerManagement`
   - נתונים וסטטוסים אישיים של עובדים

2. **משאבים משותפים (Shared Resources)**
   - מנוהל ב-`useGameLogic` באמצעות useState
   - מאגר חומרים מרכזי

3. **התקדמות מטרה (Goal Progress)**
   - מעקב ב-`useGameLogic`
   - השוואה מול דרישות `dailyGoal`

## זרימת ביצוע משימה
1. שחקן בוחר עובד ← משימה
2. מערכת בודקת יכולת תשלום (`canAffordTask()`)
3. אם תקין: מתחיל טיימר משימה (`startWorkerTaskTimer`)
4. בסיום הטיימר (`completeWorkerTask`):
   - מחיל תוצאות על עובד/משאבים
   - מעדכן התקדמות מטרה
   - מרענן מצב ממשק המשתמש

## מערכת נתוני עובדים ומשאבים
### דוגמה להשפעות נתונים
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
**תרגום:** עובד מוציא 25 אנרגיה, נהיה רעב ב-8% יותר, מאבד 2 מורל. צורך 3 קש ו-2 חימר ← מייצר 5 לבנים.

### סוגי משאבים
| קטגוריה       | דוגמאות            | ניהול              |
|----------------|---------------------|-------------------------|
| חומרים      | קש, חימר, לבנים | מאגר משותף             |
| צרכי עובד   | אנרגיה, מורל      | אישי לכל עובד   |
| מתכלים    | מזון, מים         | משותף אך ניתן למילוי |

## אינטגרציה עם כלי AI (דוגמת Cline)
**הצעות לפרומפטים:**
```markdown
"צור משימת תחזוקה חדשה המאפשרת לעובדים לתקן כלים. עלות: 2 לבנים, 1 קש. תוצאה: +10 מורל, +5 אנרגיה. משך: 20 שניות."

"צור תרחיש משבר שבו המזון נדיר והעובדים צריכים לתעדף ליקוט על פני בנייה."
```

**מבנה קוד מוצע:**
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}

## שיטות עבודה מומלצות למודינג (Modding)
1. **איזון משימות**: שמרו על יחסי עלות/תוצאה פרופורציונליים למשך הזמן.
2. **עיצוב תרחישים**: צרו סדרי עדיפויות מתחרים (למשל, מזון מול חומרים).
3. **שיקולי ממשק משתמש**: התאימו צבעי משאבים, השתמשו באייקונים ברורים.
