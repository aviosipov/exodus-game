---
title: תיעוד משחק - פולשים מהחלל שמירה על התקווה
description: תיעוד טכני לגרסת Space Invaders המותאמת למשחק יציאת מצרים
lang: he
---

# תיעוד משחק - פולשים מהחלל: שמירה על התקווה

## סקירה כללית
גרסה מותאמת זו של Space Invaders משלבת מכניקת ארקייד קלאסית עם אוצר מילים עברי משמעותי. שחקנים מגנים מפני מושגים "שליליים" יורדים תוך איסוף מושגים "חיוביים", בהתאם לנושא של שמירה על התקווה. נבנה באמצעות React/TypeScript ו-Canvas API.

## מבנה קבצים

### `page.tsx`
```typescript
// קומפוננטת עמוד לדוגמה
```
- **מטרה**: נקודת כניסה המרנדרת את קומפוננטת המשחק
- **תכונות מרכזיות**:
  - מגדירה פריסת מיכל רספונסיבית
  - מציגה את כותרת המשחק מעל הקנבס

### `SpaceInvadersGame.tsx`
```typescript
// קומפוננטת משחק מרכזית לדוגמה
```
- **מטרה**: מנהלת את לולאת המשחק, הקלט והרינדור
- **תכונות מרכזיות**:
  - משתמשת ב-hooks של React (`useState`, `useRef`) לניהול מצב המשחק
  - מממשת טיפול בקלט מקלדת
  - מתאמת את לולאת המשחק עם `requestAnimationFrame`
  - מטפלת במחזור החיים של רינדור הקנבס

### `config.ts`
```typescript
export const CANVAS_WIDTH = 800;
```
- **מטרה**: מאגר תצורה מרכזי
- **חלקים מרכזיים**:
  - מידות ועיצוב הקנבס
  - פרמטרים ויזואליים של שחקן/אויב
  - הגדרות איזון משחק (ניקוד, מהירויות)
  - טקסט ממשק משתמש מתורגם (עברית/אנגלית)

### `gameLogic.ts`
```typescript
function collides(rect1, rect2) { /* לוגיקת התנגשות */ }
```
- **מטרה**: חוקי משחק מרכזיים וניהול מצב
- **מערכות מרכזיות**:
  - זיהוי התנגשויות (Axis-Aligned Bounding Box)
  - חישוב ניקוד/חיים
  - לוגיקת יצירת אויבים
  - תנאי סיום משחק

### קבצי מחלקות (player.ts, bullet.ts, enemy.ts)
{/* קטע קוד לדוגמה הוסר עקב שגיאות ניתוח MDX חוזרות */}
- **מטרה**: ניהול ישויות מונחה עצמים
- **תבניות מרכזיות**:
  - הפרדת מצב (מאפיינים) והתנהגות (מתודות)
  - `update()` לחישובי מיקום
  - `draw()` לרינדור על הקנבס

## מושגים מרכזיים

### ארכיטקטורת לולאת המשחק
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
- **מימוש**:
  1. עיבוד קלט
  2. עדכון מצב באמצעות `updateGameLogic`
  3. ציור מחדש של הקנבס
  4. חזרה באמצעות `requestAnimationFrame`

- **אופטימיזציות**:
  - שימוש ב-`useRef` למצב קלט כדי למנוע תלויות רינדור
  - אצווה (batching) של עדכוני מצב עם setState של React

### ניהול מצב
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
- **אסטרטגיה**:
  - מקור אמת יחיד במצב React
  - עדכונים בלתי משתנים (immutable) באמצעות אופרטור הפיזור (spread operator)
  - מצב נגזר מחושב בכל פריים

### צינור הרינדור (Rendering Pipeline)
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
- **תהליך**:
  1. ניקוי הקנבס עם צבע רקע
  2. ציור שחקן, קליעים ותיבות
  3. רינדור שכבות ממשק משתמש (ניקוד, חיים)
  4. טיפול במסך סיום משחק

### טיפול בקלט
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
- **מכניקה**:
  - מאזיני אירועי מקלדת
  - מצב מאוחסן ב-`useRef` לגישה מדויקת לפריים
  - מניעת התנהגות ברירת מחדל של מקש הרווח

### מערכת התנגשויות
{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}
- **סוגי זיהוי**:
  1. קליע מול תיבה
  2. שחקן מול תיבה
  3. בדיקות קצה מסך

### מחלקות ישויות
**שחקן (Player)**:
- תנועה מוגבלת לגבולות הקנבס
- מערכת השהיית ירי (cooldown)
- ניהול חיים

**קליע (Bullet)**:
- מערכת זמן חיים (TTL) (הערה: נראה שהלוגיקה של TTL הוסרה בקוד שסופק, מסתמך על בדיקת יציאה מהמסך)
- תנועה אנכית בלבד
- ניהול מאגר (פעיל/לא פעיל)

**תיבה (Box/Enemy)**:
- יצירה אקראית עם יחסי סוגים
- הצגת מילה מותאמת לנושא
- ניקוד דיפרנציאלי לפי סוג

## מדריך תצורה
```typescript
// כוונון קושי
export const BOX_SPAWN_RATE = 120; // נמוך יותר = תדירות גבוהה יותר
export const POSITIVE_BOX_RATIO = 0.35; // 35% תיבות חיוביות

// התאמה אישית ויזואלית
export const POSITIVE_BOX_COLOR = '#2ecc71';
export const NEGATIVE_WORDS = ['עבודת פרך', 'שעבוד'];
```
**התאמות נפוצות**:
- `BOX_DESCENT_SPEED`: הגדלה לקושי גבוה יותר
- `SCORE_PENALTY_HIT_POSITIVE`: איזון סיכון/תגמול
- `POSITIVE_WORDS`: הוספת מונחי אוצר מילים חדשים

## רעיונות להרחבה
1. **מערכת Power-Ups**: הוספת מגנים/הגברות מהירות זמניים
2. **מערכת גלים**: רמות קושי מתקדמות
3. **משוב שמע**: אפקטים קוליים לפגיעות/החמצות
4. **אחסון מקומי**: שמירת שיאים
5. **תמיכה במובייל**: טיפול בקלט מגע

{/* קטע קוד הוסר עקב בעיות פוטנציאליות בניתוח MDX */}

ארכיטקטורה זו מדגימה תבניות React מודרניות בשילוב עם טכניקות פיתוח משחקים קלאסיות. הפרדת התחומיות בין קומפוננטות React ללוגיקת המשחק הופכת אותו קל לתחזוקה תוך שמירה על פעולות רגישות לביצועים בלולאת רינדור הקנבס.
